<!DOCTYPE html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.29/browser.js"></script>


    <script type="text/babel">





        /* In this example a local variable _this is used so that it
        doesnt fall out of scope in the anonymous function that 
        logs the activity to the console */
        var person = {
            first: "Do",
            actions: ["Party", "Chill", "Smoke", "Code", "Snore"],
            printActions: function () {
                var _this = this;
                this.actions.forEach(function (action) {
                    var str = _this.first + " likes to " + action;
                    console.log(str);
                });
            }
        };
        console.info("Using a local variable inside the for loop");
        person.printActions();

        /* Now we can use BIND instead. Chaining .bind to the 
        end of the for each function */
        var person = {
            first: "Do",
            actions: ["Party", "Chill", "Smoke", "Code", "Snore"],
            printActions: function () {
                this.actions.forEach(function (action) {
                    var str = this.first + " likes to " + action;
                    console.log(str);
                }.bind(this));
            }
        };
        console.info("We can instead use the BIND option for the variable");
        person.printActions();


        /* Now we can use an ARROW FUNCTION to handle this
        shortening the code tremendously and also handling the scope*/
        var person = {
            first: "Do",
            actions: ["Party", "Chill", "Smoke", "Code", "Snore"],
            printActions() {
                this.actions.forEach( action => {
                    var str = this.first + " likes to " + action;
                    console.log(str);
                } // End of the ARROW FUNCTION
                ) // End of the FOR LOOP
                ; 
            }
        };
        console.info("Now we can turn it into an arrow function");
        person.printActions();


        /* In this example the this variable is falling out of scope within
        the for each loop, thus resulting in an undefined error in the console*/
        var person = {
            first: "Do",
            actions: ["Party", "Chill", "Smoke", "Code", "Snore"],
            printActions: function () {
                this.actions.forEach(function (action) {
                    var str = this.first + " likes to " + action;
                    console.log(str);
                }); // we are going to BIND the this variable to the
                // for each loop in order to make it available within the 
                // anonymous function that inside it. 
            }
        };
        person.printActions();


    </script>

    <title>Arroy Functions and the This Scope</title>
</head>

<body>
</body>

</html>