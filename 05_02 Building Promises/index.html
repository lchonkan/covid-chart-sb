<!DOCTYPE html>
<html lang="en">

<head>


    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Roboto&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat&family=Roboto&display=swap');
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.29/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.8.7/polyfill.js"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <script type="text/babel">

        // USING PROMISES TO LOAD DATA
        /* This function is going to fetch some data from an API of Austronauts */
        const spacePeople = () => {                         // this is a function that returns a promise
            return new Promise((resolves,rejects) => {      // this is where we load the data. resovles and rejects are the arguments of this arrow function
                const api = 'http://api.open-notify.org/astros.json'; //Load the API
                const request = new XMLHttpRequest();                  //create a request 
                request.open('GET',api);                                // open the connection to the api
                request.onload = () => {                                // function
                    if(request.status === 200){                         // check if the request is sucessful
                        resolves(JSON.parse(request.response));         // resolves to parse the JSON in the response
                    }else{                                              // if it does not work we use rejects
                        rejects(Error(request.statusText));             // action if request is not sucessfull
                    }
                };

                request.onerror = err => rejects(err);
                request.send();
            }); 
        }

        spacePeople().then(
            spaceData => console.log(spaceData),
            err => console.error(
                new Error('Cannot load space people')
            )
        );
        
    </script>


    <title>Asynchronous features</title>
</head>

<body>
    <header>

        <h1>Building Promises</h1>
    </header>

    <main>


    </main>
</body>

</html>